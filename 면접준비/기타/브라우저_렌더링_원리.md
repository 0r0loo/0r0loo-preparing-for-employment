# 브라우저 렌더링 (작동) 원리에 대해 설명하세요



## 핵심 답변







## 내가 정리

1. 서버로부터 리소스를 받습니다. (리소스 : HTML, CSS, JS, Image 등등)
2. HTML 문서를 순서대로 파싱 하여 DOM 트리를 그립니다.
3. CSS 파일을 만나면 CSS DOM 트리를 그립니다.
4. JS 파일을 만나면 브라우저말고 자바스크립트 엔진이 파싱을 한다.







## 래퍼런스

### 포이에마

브라우저의 핵심 기능은 사용자가 참조하고자 하는 웹페이지를 서버에 요청 하고 서버의 응답을 받아 브라우저에 표시하는 것이다. 

브라우저는 서버로부터 HTML,CSS,JavaScript, 이미지 파일 등을 응답받는다. 

HTML,CSS 파일은 렌더링 엔진의 HTML 파서와 CSS 파서에 의해 파싱(parsing)되어 DOM, CSSDOM 트리로 변환되고 렌더 트리로 결합된다. 

이렇게 생성된 렌더 트리를 기반으로 브라우저는 웹페이지를 표시한다. 

자바스크립트는 렌더링 엔진이 아닌 자바스크립트 엔진이 처리한다. 

 HTML 파서는 script 태그를 만나면 자바스크립트 코드를 실행하기 위해 DOM 생성 프로세스를 중지하고 자바스크립트 엔진으로 제어 권한을 넘긴다. 

제어 권한을 넘겨 받은 자바스크립트 엔진은 script 태그 내의 자바스크립트 코드 또는 cript 태그의 src 어트리뷰트에 정의된 자바스크립트 파일을 로드하고 파싱하여 실행한다. 

자바스크립트 실행이 완료 되면 다시 HTML 파서로 제어권한을 넘겨 브라우저가 중지했던 시점부터 DOM 생성을 재개한다. 

이처럼 브라우저는 동기적으로 HTML, CSS, Javascript을 처리한다. 이것은 script 태그의 위치에 따라 블로킹이 발생하여 DOM 생성이 지연될 수 있다는 것을 의미한다. 

따라서 script 태그의 위치는 중요한 의미를 갖는다 body 요소의 가장 아래에 자바스크립트를 위치시키는 것을 좋은 아이디어디다. 

HTML 요소들이 스크립트로 로딩 지연으로 인해 렌더링에 지장 받는 일이 발생하지 않아 페이지 로딩 시간이 단축된다. 

DOM 이 완성되지 않은 상태에서 자바스크립트가 DOM 을 조작한다면 에러가 발생한다.

### 네특심

1. Loading
   1. HTTP 모듈 또는 파일 시스템으로 전달 받은 리소스 스트림을 읽는 과정
2. DOM Tree
   1. HTML 마크업을 처리하고 DOM 트리를 빌드한다. (**"무엇을"** 그릴지 결정한다.)
3. CSSSOM Tree
   1. CSS 마크업을 처리하고 CSSOM 트리를 빌드한다. (**"어떻게"** 그릴지 결정한다.)
4. Rendering Tree
   1. DOM 및 CSSOM 을 결합하여 렌더링 트리를 형성한다. (**"화면에 그려질 것만"** 결정)
5. Layout
   1. 렌더링 트리에서 레이아웃을 실행하여 각 노드의 기하학적 형태를 계산한다. (**"Box-Model"** 을 생성한다.)
6. Paint
   1. 개별 노드를 화면에 페인트한다.(or 래스터화)